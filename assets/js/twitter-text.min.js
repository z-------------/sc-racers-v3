/*
twitter-text
Copyright 2011 Twitter, Inc.
Licensed under the Apache License, Version 2.0
*/
!function(){function t(t,e){return e=e||"","string"!=typeof t&&(t.global&&e.indexOf("g")<0&&(e+="g"),t.ignoreCase&&e.indexOf("i")<0&&(e+="i"),t.multiline&&e.indexOf("m")<0&&(e+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,e){var a=n.txt.regexen[e]||"";return"string"!=typeof a&&(a=a.source),a}),e)}function e(t,e){return t.replace(/#\{(\w+)\}/g,function(t,a){return e[a]||""})}function a(t,e,a){var r=String.fromCharCode(e);return a!==e&&(r+="-"+String.fromCharCode(a)),t.push(r),t}function r(t){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function i(t,e,a){return a?!t||t.match(e)&&RegExp["$&"]===t:"string"==typeof t&&t.match(e)&&RegExp["$&"]===t}if("undefined"==typeof n||null===n)var n={};n.txt={},n.txt.regexen={};var s={"&":"&",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};n.txt.htmlEscape=function(t){return t&&t.replace(/[&"'><]/g,function(t){return s[t]})},n.txt.regexSupplant=t,n.txt.stringSupplant=e,n.txt.addCharsToCharClass=a;var l=String.fromCharCode,o=[l(32),l(133),l(160),l(5760),l(6158),l(8232),l(8233),l(8239),l(8287),l(12288)];a(o,9,13),a(o,8192,8202);var c=[l(65534),l(65279),l(65535)];a(c,8234,8238),n.txt.regexen.spaces_group=t(o.join("")),n.txt.regexen.spaces=t("["+o.join("")+"]"),n.txt.regexen.invalid_chars_group=t(c.join("")),n.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,n.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,n.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var g=[];a(g,192,214),a(g,216,246),a(g,248,255),a(g,256,591),a(g,595,596),a(g,598,599),a(g,601,601),a(g,603,603),a(g,611,611),a(g,616,616),a(g,623,623),a(g,626,626),a(g,649,649),a(g,651,651),a(g,699,699),a(g,768,879),a(g,7680,7935),n.txt.regexen.latinAccentChars=t(g.join(""));var h="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఃా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︭",u="0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",x="_‌‍꙾־׳״゛゜゠・〃་༌།";n.txt.regexen.hashSigns=/[#＃]/,n.txt.regexen.hashtagAlpha=new RegExp("["+h+"]"),n.txt.regexen.hashtagAlphaNumeric=new RegExp("["+h+u+x+"]"),n.txt.regexen.endHashtagMatch=t(/^(?:#{hashSigns}|:\/\/)/),n.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+h+u+x+"])"),n.txt.regexen.validHashtag=t(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),n.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|(?:rt|RT|rT|Rt):?)/,n.txt.regexen.atSigns=/[@＠]/,n.txt.regexen.validMentionOrList=t("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),n.txt.regexen.validReply=t(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),n.txt.regexen.endMentionMatch=t(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),n.txt.regexen.validUrlPrecedingChars=t(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),n.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,n.txt.regexen.invalidDomainChars=e("#{punct}#{spaces_group}#{invalid_chars_group}",n.txt.regexen),n.txt.regexen.validDomainChars=t(/[^#{invalidDomainChars}]/),n.txt.regexen.validSubdomain=t(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),n.txt.regexen.validDomainName=t(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),n.txt.regexen.validGTLD=t(RegExp("(?:(?:abogado|academy|accountants|active|actor|adult|aero|agency|airforce|allfinanz|alsace|android|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|care|career|careers|cartier|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|church|citic|city|claims|cleaning|click|clinic|clothing|club|coach|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cricket|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|delivery|democrat|dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|equipment|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|fail|farm|fashion|feedback|finance|financial|firmdale|fish|fishing|fitness|flights|florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|international|investments|irish|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|lacaixa|land|latrobe|lawyer|lds|lease|legal|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|luxury|madrid|maison|management|mango|market|marketing|media|meet|melbourne|meme|memorial|menu|miami|mil|mini|mobi|moda|moe|monash|money|mormon|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|partners|parts|party|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|realtor|recipes|red|rehab|reise|reisen|reit|ren|rentals|repair|report|republican|rest|restaurant|reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|samsung|sarl|sca|scb|schmidt|schule|science|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|sydney|systems|taipei|tatar|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|trust|tui|university|uno|uol|vacations|vegas|ventures|vermögensberater|vermögensberatung|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|youtube|zip|zone|дети|москва|онлайн|орг|рус|сайт|بازار|شبكة|موقع|संगठन|みんな|グーグル|世界|中信|中文网|企业|佛山|八卦|公司|公益|商城|商店|商标|在线|广东|我爱你|手机|政务|机构|游戏|移动|组织机构|网址|网店|网络|谷歌|集团|삼성|onion)(?=[^0-9a-zA-Z@]|$))")),n.txt.regexen.validCCTLD=t(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|бел|мкд|мон|рф|срб|укр|қаз|հայ|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عراق|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),n.txt.regexen.validPunycode=t(/(?:xn--[0-9a-z]+)/),n.txt.regexen.validSpecialCCTLD=t(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),n.txt.regexen.validDomain=t(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),n.txt.regexen.validAsciiDomain=t(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),n.txt.regexen.invalidShortDomain=t(/^#{validDomainName}#{validCCTLD}$/i),n.txt.regexen.validSpecialShortDomain=t(/^#{validDomainName}#{validSpecialCCTLD}$/i),n.txt.regexen.validPortNumber=t(/[0-9]+/),n.txt.regexen.validGeneralUrlPathChars=t(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),n.txt.regexen.validUrlBalancedParens=t("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),n.txt.regexen.validUrlPathEndingChars=t(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),n.txt.regexen.validUrlPath=t("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),n.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,n.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,n.txt.regexen.extractUrl=t("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),n.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,n.txt.regexen.urlHasProtocol=/^https?:\/\//i,n.txt.regexen.urlHasHttps=/^https:\/\//i,n.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,n.txt.regexen.validCashtag=t("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),n.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,n.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,n.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,n.txt.regexen.validateUrlPchar=t("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),n.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,n.txt.regexen.validateUrlUserinfo=t("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),n.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,n.txt.regexen.validateUrlIpv4=t(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),n.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,n.txt.regexen.validateUrlIp=t("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),n.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,n.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,n.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,n.txt.regexen.validateUrlDomain=t(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),n.txt.regexen.validateUrlHost=t("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),n.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,n.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,n.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,n.txt.regexen.validateUrlUnicodeDomain=t(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),n.txt.regexen.validateUrlUnicodeHost=t("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),n.txt.regexen.validateUrlPort=/[0-9]{1,5}/,n.txt.regexen.validateUrlUnicodeAuthority=t("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),n.txt.regexen.validateUrlAuthority=t("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),n.txt.regexen.validateUrlPath=t(/(\/#{validateUrlPchar}*)*/i),n.txt.regexen.validateUrlQuery=t(/(#{validateUrlPchar}|\/|\?)*/i),n.txt.regexen.validateUrlFragment=t(/(#{validateUrlPchar}|\/|\?)*/i),n.txt.regexen.validateUrlUnencoded=t("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var d="tweet-url list-slug",m="tweet-url username",v="tweet-url hashtag",p="tweet-url cashtag",f={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},U={disabled:!0,readonly:!0,multiple:!0,checked:!0};n.txt.tagAttrs=function(t){var e="";for(var a in t){var r=t[a];U[a]&&(r=r?a:null),null!=r&&(e+=" "+n.txt.htmlEscape(a)+'="'+n.txt.htmlEscape(r.toString())+'"')}return e},n.txt.linkToText=function(t,a,r,i){i.suppressNoFollow||(r.rel="nofollow"),i.linkAttributeBlock&&i.linkAttributeBlock(t,r),i.linkTextBlock&&(a=i.linkTextBlock(t,a));var s={text:a,attr:n.txt.tagAttrs(r)};return e("<a#{attr}>#{text}</a>",s)},n.txt.linkToTextWithSymbol=function(t,e,a,r,i){var s=i.symbolTag?"<"+i.symbolTag+">"+e+"</"+i.symbolTag+">":e;a=n.txt.htmlEscape(a);var l=i.textWithSymbolTag?"<"+i.textWithSymbolTag+">"+a+"</"+i.textWithSymbolTag+">":a;return i.usernameIncludeSymbol||!e.match(n.txt.regexen.atSigns)?n.txt.linkToText(t,s+l,r,i):s+n.txt.linkToText(t,l,r,i)},n.txt.linkToHashtag=function(t,e,a){var i=e.substring(t.indices[0],t.indices[0]+1),s=n.txt.htmlEscape(t.hashtag),l=r(a.htmlAttrs||{});return l.href=a.hashtagUrlBase+s,l.title="#"+s,l["class"]=a.hashtagClass,s.charAt(0).match(n.txt.regexen.rtl_chars)&&(l["class"]+=" rtl"),a.targetBlank&&(l.target="_blank"),n.txt.linkToTextWithSymbol(t,i,s,l,a)},n.txt.linkToCashtag=function(t,e,a){var i=n.txt.htmlEscape(t.cashtag),s=r(a.htmlAttrs||{});return s.href=a.cashtagUrlBase+i,s.title="$"+i,s["class"]=a.cashtagClass,a.targetBlank&&(s.target="_blank"),n.txt.linkToTextWithSymbol(t,"$",i,s,a)},n.txt.linkToMentionAndList=function(t,e,a){var i=e.substring(t.indices[0],t.indices[0]+1),s=n.txt.htmlEscape(t.screenName),l=n.txt.htmlEscape(t.listSlug),o=t.listSlug&&!a.suppressLists,c=r(a.htmlAttrs||{});return c["class"]=o?a.listClass:a.usernameClass,c.href=o?a.listUrlBase+s+l:a.usernameUrlBase+s,o||a.suppressDataScreenName||(c["data-screen-name"]=s),a.targetBlank&&(c.target="_blank"),n.txt.linkToTextWithSymbol(t,i,o?s+l:s,c,a)},n.txt.linkToUrl=function(t,e,a){var i=t.url,s=i,l=n.txt.htmlEscape(s),o=a.urlEntities&&a.urlEntities[i]||t;o.display_url&&(l=n.txt.linkTextWithEntity(o,a));var c=r(a.htmlAttrs||{});return i.match(n.txt.regexen.urlHasProtocol)||(i="http://"+i),c.href=i,a.targetBlank&&(c.target="_blank"),a.urlClass&&(c["class"]=a.urlClass),a.urlTarget&&(c.target=a.urlTarget),!a.title&&o.display_url&&(c.title=o.expanded_url),n.txt.linkToText(t,l,c,a)},n.txt.linkTextWithEntity=function(t,a){var r=t.display_url,i=t.expanded_url,s=r.replace(/…/g,"");if(-1!=i.indexOf(s)){var l=i.indexOf(s),o={displayUrlSansEllipses:s,beforeDisplayUrl:i.substr(0,l),afterDisplayUrl:i.substr(l+s.length),precedingEllipsis:r.match(/^…/)?"…":"",followingEllipsis:r.match(/…$/)?"…":""};for(var c in o)o.hasOwnProperty(c)&&(o[c]=n.txt.htmlEscape(o[c]));return o.invisible=a.invisibleTagAttrs,e("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",o)}return r},n.txt.autoLinkEntities=function(t,e,a){a=r(a||{}),a.hashtagClass=a.hashtagClass||v,a.hashtagUrlBase=a.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",a.cashtagClass=a.cashtagClass||p,a.cashtagUrlBase=a.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",a.listClass=a.listClass||d,a.usernameClass=a.usernameClass||m,a.usernameUrlBase=a.usernameUrlBase||"https://twitter.com/",a.listUrlBase=a.listUrlBase||"https://twitter.com/",a.htmlAttrs=n.txt.extractHtmlAttrsFromOptions(a),a.invisibleTagAttrs=a.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,s,l;if(a.urlEntities){for(i={},s=0,l=a.urlEntities.length;l>s;s++)i[a.urlEntities[s].url]=a.urlEntities[s];a.urlEntities=i}var o="",c=0;e.sort(function(t,e){return t.indices[0]-e.indices[0]});for(var g=a.htmlEscapeNonEntities?n.txt.htmlEscape:function(t){return t},s=0;s<e.length;s++){var h=e[s];o+=g(t.substring(c,h.indices[0])),h.url?o+=n.txt.linkToUrl(h,t,a):h.hashtag?o+=n.txt.linkToHashtag(h,t,a):h.screenName?o+=n.txt.linkToMentionAndList(h,t,a):h.cashtag&&(o+=n.txt.linkToCashtag(h,t,a)),c=h.indices[1]}return o+=g(t.substring(c,t.length))},n.txt.autoLinkWithJSON=function(t,e,a){if(e.user_mentions)for(var r=0;r<e.user_mentions.length;r++)e.user_mentions[r].screenName=e.user_mentions[r].screen_name;if(e.hashtags)for(var r=0;r<e.hashtags.length;r++)e.hashtags[r].hashtag=e.hashtags[r].text;if(e.symbols)for(var r=0;r<e.symbols.length;r++)e.symbols[r].cashtag=e.symbols[r].text;var i=[];for(var s in e)i=i.concat(e[s]);return n.txt.modifyIndicesFromUnicodeToUTF16(t,i),n.txt.autoLinkEntities(t,i,a)},n.txt.extractHtmlAttrsFromOptions=function(t){var e={};for(var a in t){var r=t[a];f[a]||(U[a]&&(r=r?a:null),null!=r&&(e[a]=r))}return e},n.txt.autoLink=function(t,e){var a=n.txt.extractEntitiesWithIndices(t,{extractUrlsWithoutProtocol:!1});return n.txt.autoLinkEntities(t,a,e)},n.txt.autoLinkUsernamesOrLists=function(t,e){var a=n.txt.extractMentionsOrListsWithIndices(t);return n.txt.autoLinkEntities(t,a,e)},n.txt.autoLinkHashtags=function(t,e){var a=n.txt.extractHashtagsWithIndices(t);return n.txt.autoLinkEntities(t,a,e)},n.txt.autoLinkCashtags=function(t,e){var a=n.txt.extractCashtagsWithIndices(t);return n.txt.autoLinkEntities(t,a,e)},n.txt.autoLinkUrlsCustom=function(t,e){var a=n.txt.extractUrlsWithIndices(t,{extractUrlsWithoutProtocol:!1});return n.txt.autoLinkEntities(t,a,e)},n.txt.removeOverlappingEntities=function(t){t.sort(function(t,e){return t.indices[0]-e.indices[0]});for(var e=t[0],a=1;a<t.length;a++)e.indices[1]>t[a].indices[0]?(t.splice(a,1),a--):e=t[a]},n.txt.extractEntitiesWithIndices=function(t,e){var a=n.txt.extractUrlsWithIndices(t,e).concat(n.txt.extractMentionsOrListsWithIndices(t)).concat(n.txt.extractHashtagsWithIndices(t,{checkUrlOverlap:!1})).concat(n.txt.extractCashtagsWithIndices(t));return 0==a.length?[]:(n.txt.removeOverlappingEntities(a),a)},n.txt.extractMentions=function(t){for(var e=[],a=n.txt.extractMentionsWithIndices(t),r=0;r<a.length;r++){var i=a[r].screenName;e.push(i)}return e},n.txt.extractMentionsWithIndices=function(t){for(var e,a=[],r=n.txt.extractMentionsOrListsWithIndices(t),i=0;i<r.length;i++)e=r[i],""==e.listSlug&&a.push({screenName:e.screenName,indices:e.indices});return a},n.txt.extractMentionsOrListsWithIndices=function(t){if(!t||!t.match(n.txt.regexen.atSigns))return[];var e=[];return t.replace(n.txt.regexen.validMentionOrList,function(t,a,r,i,s,l,o){var c=o.slice(l+t.length);if(!c.match(n.txt.regexen.endMentionMatch)){s=s||"";var g=l+a.length,h=g+i.length+s.length+1;e.push({screenName:i,listSlug:s,indices:[g,h]})}}),e},n.txt.extractReplies=function(t){if(!t)return null;var e=t.match(n.txt.regexen.validReply);return!e||RegExp.rightContext.match(n.txt.regexen.endMentionMatch)?null:e[1]},n.txt.extractUrls=function(t,e){for(var a=[],r=n.txt.extractUrlsWithIndices(t,e),i=0;i<r.length;i++)a.push(r[i].url);return a},n.txt.extractUrlsWithIndices=function(t,e){if(e||(e={extractUrlsWithoutProtocol:!0}),!t||(e.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];for(var a=[];n.txt.regexen.extractUrl.exec(t);){var r=RegExp.$2,i=RegExp.$3,s=RegExp.$4,l=RegExp.$5,o=RegExp.$7,c=n.txt.regexen.extractUrl.lastIndex,g=c-i.length;if(s)i.match(n.txt.regexen.validTcoUrl)&&(i=RegExp.lastMatch,c=g+i.length),a.push({url:i,indices:[g,c]});else{if(!e.extractUrlsWithoutProtocol||r.match(n.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var h=null,u=0;if(l.replace(n.txt.regexen.validAsciiDomain,function(t){var e=l.indexOf(t,u);u=e+t.length,h={url:t,indices:[g+e,g+u]},(o||t.match(n.txt.regexen.validSpecialShortDomain)||!t.match(n.txt.regexen.invalidShortDomain))&&a.push(h)}),null==h)continue;o&&(h.url=i.replace(l,h.url),h.indices[1]=c)}}return a},n.txt.extractHashtags=function(t){for(var e=[],a=n.txt.extractHashtagsWithIndices(t),r=0;r<a.length;r++)e.push(a[r].hashtag);return e},n.txt.extractHashtagsWithIndices=function(t,e){if(e||(e={checkUrlOverlap:!0}),!t||!t.match(n.txt.regexen.hashSigns))return[];var a=[];if(t.replace(n.txt.regexen.validHashtag,function(t,e,r,i,s,l){var o=l.slice(s+t.length);if(!o.match(n.txt.regexen.endHashtagMatch)){var c=s+e.length,g=c+i.length+1;a.push({hashtag:i,indices:[c,g]})}}),e.checkUrlOverlap){var r=n.txt.extractUrlsWithIndices(t);if(r.length>0){var i=a.concat(r);n.txt.removeOverlappingEntities(i),a=[];for(var s=0;s<i.length;s++)i[s].hashtag&&a.push(i[s])}}return a},n.txt.extractCashtags=function(t){for(var e=[],a=n.txt.extractCashtagsWithIndices(t),r=0;r<a.length;r++)e.push(a[r].cashtag);return e},n.txt.extractCashtagsWithIndices=function(t){if(!t||-1==t.indexOf("$"))return[];var e=[];return t.replace(n.txt.regexen.validCashtag,function(t,a,r,i,n){var s=n+a.length,l=s+i.length+1;e.push({cashtag:i,indices:[s,l]})}),e},n.txt.modifyIndicesFromUnicodeToUTF16=function(t,e){n.txt.convertUnicodeIndices(t,e,!1)},n.txt.modifyIndicesFromUTF16ToUnicode=function(t,e){n.txt.convertUnicodeIndices(t,e,!0)},n.txt.getUnicodeTextLength=function(t){return t.replace(n.txt.regexen.non_bmp_code_pairs," ").length},n.txt.convertUnicodeIndices=function(t,e,a){if(0!=e.length){var r=0,i=0;e.sort(function(t,e){return t.indices[0]-e.indices[0]});for(var n=0,s=e[0];r<t.length;){if(s.indices[0]==(a?r:i)){var l=s.indices[1]-s.indices[0];if(s.indices[0]=a?i:r,s.indices[1]=s.indices[0]+l,n++,n==e.length)break;s=e[n]}var o=t.charCodeAt(r);o>=55296&&56319>=o&&r<t.length-1&&(o=t.charCodeAt(r+1),o>=56320&&57343>=o&&r++),i++,r++}}},n.txt.splitTags=function(t){for(var e,a,r=t.split("<"),i=[],n=0;n<r.length;n+=1)if(a=r[n]){e=a.split(">");for(var s=0;s<e.length;s+=1)i.push(e[s])}else i.push("");return i},n.txt.hitHighlight=function(t,e,a){var r="em";if(e=e||[],a=a||{},0===e.length)return t;var i,s,l,o,c,g,h,u=a.tag||r,x=["<"+u+">","</"+u+">"],d=n.txt.splitTags(t),m="",v=0,p=d[0],f=0,U=0,b=!1,y=p,k=[];for(i=0;i<e.length;i+=1)for(s=0;s<e[i].length;s+=1)k.push(e[i][s]);for(l=0;l<k.length;l+=1){for(o=k[l],c=x[l%2],g=!1;null!=p&&o>=f+p.length;)m+=y.slice(U),b&&o===f+y.length&&(m+=c,g=!0),d[v+1]&&(m+="<"+d[v+1]+">"),f+=y.length,U=0,v+=2,p=d[v],y=p,b=!1;g||null==p?g||(g=!0,m+=c):(h=o-f,m+=y.slice(U,h)+c,U=h,b=l%2===0?!0:!1)}if(null!=p)for(U<y.length&&(m+=y.slice(U)),l=v+1;l<d.length;l+=1)m+=l%2===0?d[l]:"<"+d[l]+">";return m};var b=140,y=[l(65534),l(65279),l(65535),l(8234),l(8235),l(8236),l(8237),l(8238)];n.txt.getTweetLength=function(t,e){e||(e={short_url_length:22,short_url_length_https:23});var a=n.txt.getUnicodeTextLength(t),r=n.txt.extractUrlsWithIndices(t);n.txt.modifyIndicesFromUTF16ToUnicode(t,r);for(var i=0;i<r.length;i++)a+=r[i].indices[0]-r[i].indices[1],a+=r[i].url.toLowerCase().match(n.txt.regexen.urlHasHttps)?e.short_url_length_https:e.short_url_length;return a},n.txt.isInvalidTweet=function(t){return t?n.txt.getTweetLength(t)>b?"too_long":n.txt.hasInvalidCharacters(t)?"invalid_characters":!1:"empty"},n.txt.hasInvalidCharacters=function(t){for(var e=0;e<y.length;e++)if(t.indexOf(y[e])>=0)return!0;return!1},n.txt.isValidTweetText=function(t){return!n.txt.isInvalidTweet(t)},n.txt.isValidUsername=function(t){if(!t)return!1;var e=n.txt.extractMentions(t);return 1===e.length&&e[0]===t.slice(1)};var k=t(/^#{validMentionOrList}$/);if(n.txt.isValidList=function(t){var e=t.match(k);return!(!e||""!=e[1]||!e[4])},n.txt.isValidHashtag=function(t){if(!t)return!1;var e=n.txt.extractHashtags(t);return 1===e.length&&e[0]===t.slice(1)},n.txt.isValidUrl=function(t,e,a){if(null==e&&(e=!0),null==a&&(a=!0),!t)return!1;var r=t.match(n.txt.regexen.validateUrlUnencoded);if(!r||r[0]!==t)return!1;var s=r[1],l=r[2],o=r[3],c=r[4],g=r[5];return(!a||i(s,n.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&i(o,n.txt.regexen.validateUrlPath)&&i(c,n.txt.regexen.validateUrlQuery,!0)&&i(g,n.txt.regexen.validateUrlFragment,!0)?e&&i(l,n.txt.regexen.validateUrlUnicodeAuthority)||!e&&i(l,n.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=n.txt),"function"==typeof define&&define.amd&&define([],n.txt),"undefined"!=typeof window)if(window.twttr)for(var C in n)window.twttr[C]=n[C];else window.twttr=n}();